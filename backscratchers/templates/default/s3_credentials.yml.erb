<% (['development', 'production'] + [@environment]).uniq.flatten.each do |env| %>
<%= env %>:
  bucket: <%= @vars[:bucket] %>
  access_key_id: <%= @vars[:access_key_id] %>
  secret_access_key: <%= @vars[:secret_access_key] %>
  s3_endpoint: <%= @vars[:s3_endpoint] %>
  s3_host_name: <%= @vars[:s3_host_name] %>
  region: <%= @vars[:region] %>
  path_style: true
  <% if @environment == 'production' %>
  # Source bucket not included as itâ€™s n/a to production - production *is* the source!
  <% elsif @vars[:source_bucket] %>
  source_bucket: <%= @vars[:source_bucket] %>
  <% else %>
  # No source bucket attribute provided.
  <% end %>

<% end %>
