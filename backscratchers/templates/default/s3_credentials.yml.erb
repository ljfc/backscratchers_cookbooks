<% (['development', 'production'] + [@environment]).uniq.flatten.each do |env| %>
<%= env %>:
  bucket: <%= @s3_credentials[:bucket] %>
  access_key_id: <%= @s3_credentials[:access_key_id] %>
  secret_access_key: <%= @s3_credentials[:secret_access_key] %>
  s3_endpoint: <%= @s3_credentials[:s3_endpoint] %>
  s3_host_name: <%= @s3_credentials[:s3_host_name] %>
  region: <%= @s3_credentials[:region] %>
  path_style: true
  <% if @environment == 'production' %>
  # Source bucket not included as itâ€™s n/a to production - production *is* the source!
  <% elsif @s3_credentials[:source_bucket] %>
  source_bucket: <%= @s3_credentials[:source_bucket] %>
  <% else %>
  # No source bucket attribute provided.
  <% end %>

<% end %>
